;固定イベント
;RETURN	0:失敗した　1:成功した　2:以後のイベントスキップ
@CHECK_FIXED_EVENT_S_143
;LOCAL
;0	LOOP
;1	目標値
;2	達成値
;3	戻り値
;4	被害者あり
;5	ガスの種類
;6	回避力

LOCAL:3 = 0

;目標値（イベント難易度）決定
LOCAL:1 = 0


;達成値決定
CALL GET_SEARCH_RATE
LOCAL:2 = RESULT

;発生率上昇
IF LOCAL:2 >= LOCAL:1
	CALL ADD_ABL_EXP_PT(0, 300)
	PRINTFORMW 突然周囲からガスが湧きだしてきた！
	PRINTFORML 
	LOCAL:5 = RAND:5
	LOCAL:6 = 100 + GET_PT_MAX_ABL(5) * 40 + ABL:1:5 * 15
	IF FLAG:10
		LOCAL:6 += ABL:(FLAG:10):5 * 15
	ENDIF
	IF FLAG:11
		LOCAL:6 += ABL:(FLAG:11):5 * 15
	ENDIF
	
	IF 90 > RAND:(LOCAL:6)
		CALL ADD_ABL_EXP_PT(5, 1000 + RAND:(GET_PT_MAX_ABL(5) * 500 + 1))
		PRINTFORML %CALLNAME:1%%TACHI()%はガスを思いっきり吸い込んでしまった！
		IF LOCAL:5 == 0
			PRINTFORML %CALLNAME:1%%TACHI()%は少し眠くなってきた…
			CALL PRINT_MESSAGE(1, 200, 143, CALLNAME:1, "", 1)
			CALL PRINT_MESSAGE(FLAG:10, 200, 143, CALLNAME:1, "", 1)
			CALL PRINT_MESSAGE(FLAG:11, 200, 143, CALLNAME:1, "", 1)
			FLAG:7 += 2
		ELSEIF LOCAL:5 == 1
			PRINTFORML %CALLNAME:1%%TACHI()%は【発情】し始めた！
			CALL PRINT_MESSAGE(1, 200, 143, CALLNAME:1, "", 2)
			CALL PRINT_MESSAGE(FLAG:10, 200, 143, CALLNAME:1, "", 2)
			CALL PRINT_MESSAGE(FLAG:11, 200, 143, CALLNAME:1, "", 2)
			;◆発情レベルパッチ
			IF CFLAG:1:28 < 3
				CFLAG:1:28 += 1
			ENDIF
			IF FLAG:10 && CFLAG:(FLAG:10):28 < 3
				CFLAG:(FLAG:10):28 += 1
			ENDIF
			IF FLAG:11 && CFLAG:(FLAG:11):28 < 3
				CFLAG:(FLAG:11):28 += 1
			ENDIF
			;◆◆
		ELSEIF LOCAL:5 == 2
			PRINTFORML %CALLNAME:1%%TACHI()%は急に自慰が止まらなくなった！
			CALL PRINT_MESSAGE(1, 200, 143, CALLNAME:1, "", 3)
			CALL PRINT_MESSAGE(FLAG:10, 200, 143, CALLNAME:1, "", 3)
			CALL PRINT_MESSAGE(FLAG:11, 200, 143, CALLNAME:1, "", 3)
			CALL MASTURBATION(1, 1, 100)
			IF FLAG:10
				CALL MASTURBATION(FLAG:10, 1, 100)
			ENDIF
			IF FLAG:11
				CALL MASTURBATION(FLAG:11, 1, 100)
			ENDIF
		ELSEIF LOCAL:5 == 3
			PRINTFORML %CALLNAME:1%%TACHI()%のテンションが上がった！
			CALL PRINT_MESSAGE(1, 200, 143, CALLNAME:1, "", 4)
			CALL PRINT_MESSAGE(FLAG:10, 200, 143, CALLNAME:1, "", 4)
			CALL PRINT_MESSAGE(FLAG:11, 200, 143, CALLNAME:1, "", 4)
			BASE:1:4 = 200
			IF FLAG:10
				BASE:(FLAG:10):4 = 200
			ENDIF
			IF FLAG:11
				BASE:(FLAG:11):4 = 200
			ENDIF
		ELSE
			PRINTFORML %CALLNAME:1%%TACHI()%のテンションが下がった…
			CALL PRINT_MESSAGE(1, 200, 143, CALLNAME:1, "", 5)
			CALL PRINT_MESSAGE(FLAG:10, 200, 143, CALLNAME:1, "", 5)
			CALL PRINT_MESSAGE(FLAG:11, 200, 143, CALLNAME:1, "", 5)
			BASE:1:4 = 0
			IF FLAG:10
				BASE:(FLAG:10):4 = 0
			ENDIF
			IF FLAG:11
				BASE:(FLAG:11):4 = 0
			ENDIF
		ENDIF

;気絶ガス
	ELSEIF 96 < RAND:100 && FLAG:4 >= 2
		CALL ADD_ABL_EXP_PT(5, 1000 + RAND:(GET_PT_MAX_ABL(5) * 500 + 1))
		PRINTFORML %CALLNAME:1%%TACHI()%はガスを思いっきり吸い込んでしまった！
		LOCAL:5 = 4
			PRINTFORML %CALLNAME:1%%TACHI()%は気絶した…
			CALL PRINT_MESSAGE(1, 200, 143, CALLNAME:1, "", 7)
			CALL PRINT_MESSAGE(FLAG:10, 200, 143, CALLNAME:1, "", 7)
			CALL PRINT_MESSAGE(FLAG:11, 200, 143, CALLNAME:1, "", 7)
			FLAG:7 = 15
	ELSE
		CALL ADD_ABL_EXP_PT(5, 500 + RAND:(GET_PT_MAX_ABL(5) * 200 + 1))
		PRINTFORML %CALLNAME:1%%TACHI()%は咄嗟に息を止め、ガスを吸わずに済んだ！
		CALL PRINT_MESSAGE(1, 200, 143, CALLNAME:1, "", 6)
		CALL PRINT_MESSAGE(FLAG:10, 200, 143, CALLNAME:1, "", 6)
		CALL PRINT_MESSAGE(FLAG:11, 200, 143, CALLNAME:1, "", 6)
	ENDIF
	
	WAIT
	
	;別の場所に移動
	FLAG:143 = RAND:30 + 1
	
	LOCAL:3 = 1
ELSE
	;見つからなかった場合（通常は何もしない）
ENDIF

RETURN LOCAL:3

