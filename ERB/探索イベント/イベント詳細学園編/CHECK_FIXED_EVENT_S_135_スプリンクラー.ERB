;固定イベント
;RETURN	0:失敗した　1:成功した　2:以後のイベントスキップ
@CHECK_FIXED_EVENT_S_135
#DIM LCOUNT

;LOCAL
;0	LOOP
;1	目標値
;2	達成値
;3	戻り値
;4	被害者あり
;5	身体に張り付く

LOCAL:3 = 0

;目標値（イベント難易度）決定
LOCAL:1 = 0


;達成値決定
CALL GET_SEARCH_RATE
LOCAL:2 = RESULT


IF LOCAL:2 >= LOCAL:1
	CALL ADD_ABL_EXP_PT(0, 300)
	PRINTFORML 探索していた%CALLNAME:1%%TACHI()%の頬に水滴が当たった…
	PRINTFORMW ふと上を見上げると、スプリンクラーから謎の液体が噴出してきた！
	PRINTFORML 
	LOCAL:4 = 0
	
	SELECTCASE RAND:30
	
		CASE 0 TO 9
			FOR LCOUNT, 0, 3
				IF 90 > RAND:(100 + ABL:(GET_MEMBER(LCOUNT)):5 * 50) && GET_MEMBER(LCOUNT)
					CALL ADD_ABL_EXP(5, (GET_MEMBER(LCOUNT)), 1000 + RAND:(ABL:(GET_MEMBER(LCOUNT)):5 * 500 + 1))
					BASE:GET_MEMBER(LCOUNT):DP += 10 + RAND:30
					PRINTFORML %CALLNAME:GET_MEMBER(LCOUNT)%は液体をかぶってしまった……
					CALL PRINT_MESSAGE((GET_MEMBER(LCOUNT)), 200, 135, CALLNAME:(GET_MEMBER(LCOUNT)), "", 0)
					LOCAL:4 = 1
				ELSEIF GET_MEMBER(LCOUNT)
					CALL ADD_ABL_EXP(5,GET_MEMBER(LCOUNT) , 500 + RAND:(ABL:(GET_MEMBER(LCOUNT)):5 * 200 + 1))
					PRINTFORML %CALLNAME:GET_MEMBER(LCOUNT)%は避けた！
				ENDIF
			NEXT
			IF LOCAL:4
				PRINTFORML 避けるのに失敗した者は白い液体でベトベトになってしまった……
				PRINTFORML 
			ELSE
				PRINTFORML %CALLNAME:1%%TACHI()%は汚いシャワーを浴びずに済んだようだ……
				PRINTFORML 
			ENDIF
		CASE 10 TO 19
			FOR LCOUNT, 0, 3
				IF 90 > RAND:(100 + ABL:(GET_MEMBER(LCOUNT)):5 * 50) && GET_MEMBER(LCOUNT)
					CFLAG:GET_MEMBER(LCOUNT):28 += 1 + RAND:3
					CALL PRINT_MESSAGE((GET_MEMBER(LCOUNT)), 200, 135, CALLNAME:(GET_MEMBER(LCOUNT)), "", 1)
					PRINTFORML %CALLNAME:GET_MEMBER(LCOUNT)%は液体をかぶってしまった……
					PRINTFORML 媚薬だったらしく体がほてりうずいてしまう……
					CALL RANDOM_MASTURBATION(GET_MEMBER(LCOUNT), CALLNAME:GET_MEMBER(LCOUNT))
					LOCAL:4 = 1
				ELSEIF GET_MEMBER(LCOUNT)
					CALL ADD_ABL_EXP(5,(GET_MEMBER(LCOUNT)) , 500 + RAND:(ABL:(GET_MEMBER(LCOUNT)):5 * 200 + 1))
					PRINTFORML %CALLNAME:GET_MEMBER(LCOUNT)%は避けた！
				ENDIF
			NEXT
			IF LOCAL:4
				PRINTFORML %CALLNAME:1%%TACHI()%は気まずい顔をしながらその場をあとにした……
				PRINTFORML 
			ELSE
				PRINTFORML %CALLNAME:1%%TACHI()%はおかしなシャワーを浴びずに済んだようだ……
				PRINTFORML 
			ENDIF
				
		CASEELSE
			FOR LCOUNT, 0, 3
				IF  90 > RAND:(100 + ABL:(GET_MEMBER(LCOUNT)):5 * 50) && GET_MEMBER(LCOUNT)
					IF FLAG:529 == 1
						BASE:(GET_MEMBER(LCOUNT)):5 += MAXBASE:(GET_MEMBER(LCOUNT)):3 * 2
					ELSE
						CALL DAMAGE_COMMON((GET_MEMBER(LCOUNT)), 3, 10000, 100)
					ENDIF
					CALL PRINT_MESSAGE((GET_MEMBER(LCOUNT)), 200, 135, CALLNAME:(GET_MEMBER(LCOUNT)), "", 2)
					PRINTFORML %CALLNAME:GET_MEMBER(LCOUNT)%は液体をかぶってしまった……
					PRINTFORML うごめくスライムが服だけとかしていく……
					CALL RANDOM_MASTURBATION(GET_MEMBER(LCOUNT), CALLNAME:GET_MEMBER(LCOUNT))
					LOCAL:4 = 1
				ELSEIF GET_MEMBER(LCOUNT)
					CALL ADD_ABL_EXP(5,(GET_MEMBER(LCOUNT)) , 500 + RAND:(ABL:(GET_MEMBER(LCOUNT)):5 * 200 + 1))
					PRINTFORML %CALLNAME:GET_MEMBER(LCOUNT)%は避けた！
				ENDIF
			NEXT
			IF LOCAL:4
				PRINTFORML 
				PRINTFORML 服を溶かしただけで満足したのか、スライムはそのまま去って行った…
			ELSE
				PRINTFORML 
				PRINTFORML 不意打ちが避けられてしまったスライムは、そそくさと逃げ出した…
			ENDIF
	ENDSELECT
				
	
	WAIT
	
	;別の場所に再配置
	FLAG:135 = RAND:30 + 1
	LOCAL:3 = 1
ELSE
	;見つからなかった場合（通常は何もしない）
ENDIF

RETURN LOCAL:3

