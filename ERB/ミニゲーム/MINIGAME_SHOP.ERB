@MINIGAME_SHOP

CALL STATUS_RENEW

DRAWLINE
$INPUT_LOOP
FOR LOCAL:10, 2, CHARANUM

	;---名前---
	PRINTFORM %"【"+CALLNAME:(LOCAL:10)+"】", 15, LEFT% 
	;---汚れの状況を表示---
	LOCALS = %""%
	IF BASE:(LOCAL:10):5 >= 100
		SETCOLOR 0xEE1010
		LOCALS = 強烈な雌の臭いが漂っている…
	ELSEIF BASE:(LOCAL:10):5 >= 60
		SETCOLOR 0xEE10EE
		LOCALS = 染み付いた体液が甘い香りを放っている…
	ELSEIF BASE:(LOCAL:10):5 >= 30
		SETCOLOR 0xEEEE10
		LOCALS = 触手の体液や自らの愛液で汚されている…
	ENDIF
	PRINTFORM %LOCALS, 20, LEFT%
	LOCALS = %""%
	RESETCOLOR
	;---素質---
	CALL MINIGAME_TALENT(LOCAL:10)

	;------
	PRINTL
	IF FLAG:4 == 0
		;---HP---
		PRINTFORM HP 
		CALL PRINT_COLORBAR(BASE:(LOCAL:10):HP, MAXBASE:(LOCAL:10):HP, 10, BARCOLORSET("青緑"), RESULT:1)
		LOCAL = LIMIT (BASE:(LOCAL:10):HP, 0, 99999)
		LOCAL:1 = LIMIT (MAXBASE:(LOCAL:10):HP, 0, 99999)
		PRINTFORM  ({LOCAL, 5}/{LOCAL:1, 5})  
	ENDIF
	;---EP---
	PRINTFORM EP 
	CALL PRINT_COLORBAR(BASE:(LOCAL:10):2, MAXBASE:(LOCAL:10):2, 10, BARCOLORSET("紫"), RESULT:1)
	PRINTFORM  ({BASE:(LOCAL:10):2, 5}/{MAXBASE:(LOCAL:10):2, 5})  
	;---MP---
	PRINTFORM MP 
	CALL PRINT_COLORBAR(BASE:(LOCAL:10):MP, MAXBASE:(LOCAL:10):MP, 20, BARCOLORSET("緑"), RESULT:1)
	LOCAL = LIMIT (BASE:(LOCAL:10):MP, 0, 99999)
	LOCAL:1 = LIMIT (MAXBASE:(LOCAL:10):MP, 0, 99999)
	PRINTFORM  ({LOCAL, 5}/{LOCAL:1, 5})
	;------
	PRINTL
	
	;---TP---
	IF MAXBASE:(LOCAL:10):4 == 0
		MAXBASE:(LOCAL:10):4 = 200
	ENDIF
	PRINTFORM TP 
	IF BASE:(LOCAL:10):4 <= 50
		LOCAL = BARCOLORSET("青")
		LOCAL:1 = RESULT:1
	ELSEIF BASE:(LOCAL:10):4 <= 80
		LOCAL = BARCOLORSET("薄青")
		LOCAL:1 = RESULT:1
	ELSEIF BASE:(LOCAL:10):4 >= 150
		LOCAL = BARCOLORSET("赤")
		LOCAL:1 = RESULT:1
	ELSEIF BASE:(LOCAL:10):4 >= 120
		LOCAL = BARCOLORSET("薄赤")
		LOCAL:1 = RESULT:1
	ELSE
		LOCAL = BARCOLORSET("白")
		LOCAL:1 = RESULT:1
	ENDIF
	CALL PRINT_COLORBAR(BASE:(LOCAL:10):4, MAXBASE:(LOCAL:10):4, 10, LOCAL, LOCAL:1)
	PRINTFORM  ({BASE:(LOCAL:10):4,3})
	PRINTFORM %" ", 10%
	;★ここまで★
	IF FLAG:4 == 0
		;---CP---
		PRINTFORM CP 
		;触手スーツの有無で色を変える
		IF CFLAG:(LOCAL:10):40 > 0
			LOCAL = 0x990099
			LOCAL:1 = 0x330066
		ELSE
			LOCAL = BARCOLORSET("黄")
			LOCAL:1 = RESULT:1
		ENDIF
		CALL PRINT_COLORBAR(BASE:(LOCAL:10):CP, MAXBASE:(LOCAL:10):CP, 20, LOCAL, LOCAL:1)
		LOCAL = 0
		LOCAL:1 = 0
		
		;PRINTFORM  ({BASE:(LOCAL:10):3, 5}/{MAXBASE:(LOCAL:10):3, 5}) 
		LOCAL = BASE:(LOCAL:10):CP * 1000 / MAXBASE:(LOCAL:10):CP
		IF LOCAL == 0 && BASE:(LOCAL:10):CP > 0
			LOCAL = 1
		ENDIF
		PRINTFORM  ({LOCAL/10,3}.{LOCAL%10}％
		CALL PRINT_CLOTH_LEVEL(LOCAL:10)
		PRINTFORM )
		PRINTL
	ENDIF
	;---服装---
	PRINTFORM 服装：
	CALL PRINT_CLOTH_TYPE(LOCAL:10)
	;------
	PRINTL
	PRINTFORML
NEXT
DRAWLINE
;選択肢表示

PRINTFORML [100] - 周囲を探索
DRAWLINE
PRINTFORML [150] - コンフィグ
PRINTFORML [200] - システム
IF FLAG:9
	PRINTFORML [500] - デバッグコマンド
ELSE
	PRINTFORML 　
ENDIF
PRINTFORML 


INPUT


IF RESULT == 100
	IF FLAG:4 == 3 && (FLAG:520 == 0 || FLAG:520 == 2)
		PRINTFORML ふたなりのコンフィグを変更して下さい
		GOTO INPUT_LOOP
	ELSE
		CFLAG:1:11 = 3
	ENDIF
;------
ELSEIF RESULT == 150
	CALL SET_CONFIGURE
	GOTO INPUT_LOOP
ELSEIF RESULT == 200
	CALL SYSTEM_COMMAND
	;タイトルに戻る場合はデータリセットがかかるので分岐
	IF CHARANUM < 2
		RETURN
	ELSE
		GOTO INPUT_LOOP
	ENDIF
ELSEIF RESULT == 500 && FLAG:9
	CALL DEBUG_COMMAND
	GOTO INPUT_LOOP
;------
ELSEIF RESULT == 999
	IF FLAG:9
		PRINTFORMW デバッグモードをオフにしました
		FLAG:9 = 0
	ELSE
		PRINTFORMW デバッグモードをオンにしました
		FLAG:9 = 1
	ENDIF
	GOTO INPUT_LOOP
ELSE
	PRINTW 入力値が不正です！
	GOTO INPUT_LOOP
ENDIF

JUMP MINIGAME_MAIN_PHASE


;ショップ画面での素質表示
@MINIGAME_TALENT(ARG:0)
	IF FLAG:4 == 0
		IF TALENT:(ARG:0):107
			PRINTFORM 絶壁
		ELSEIF TALENT:(ARG:0):108
			PRINTFORM 爆乳
		ELSEIF TALENT:(ARG:0):109
			PRINTFORM 貧乳
		ELSEIF TALENT:(ARG:0):110
			PRINTFORM 巨乳
		ELSEIF TALENT:(ARG:0):158 == 1
			PRINTFORM 超乳
		ELSEIF TALENT:(ARG:0):158 == 2
			PRINTFORM 超+1
		ELSEIF TALENT:(ARG:0):158 == 3
			PRINTFORM 超+2
		ELSEIF TALENT:(ARG:0):158 == 4
			PRINTFORM 超+3
		ELSEIF TALENT:(ARG:0):158 >= 5
			PRINTFORM 超+4
		ELSEIF TALENT:(ARG:0):222 == 1
			PRINTFORM 超々乳
		ELSEIF TALENT:(ARG:0):222 == 2
			PRINTFORM 超々+1
		ELSEIF TALENT:(ARG:0):222 == 3
			PRINTFORM 超々+2
		ELSEIF TALENT:(ARG:0):222 == 4
			PRINTFORM 超々+3
		ELSEIF TALENT:(ARG:0):222 >= 5
			PRINTFORM 超々+4
		ELSEIF TALENT:(ARG:0):223
			PRINTFORM 接地乳
		ELSE
			PRINTFORM 普乳
		ENDIF
		IF TALENT:(ARG:0):76
			PRINTFORM 淫乳
		ENDIF
		IF TALENT:(ARG:0):102 <= -1
			PRINTFORM Ｂ鈍
		ELSEIF TALENT:(ARG:0):102 == 1
			PRINTFORM Ｂ敏
		ELSEIF TALENT:(ARG:0):102 == 2
			PRINTFORM Ｂ過
		ELSEIF TALENT:(ARG:0):102 == 3
			PRINTFORM Ｂ異常
		ENDIF
		IF TALENT:(ARG:0):130 == 1
			PRINTFORM 母乳
		ELSEIF TALENT:(ARG:0):130 == 2
			PRINTFORM 母乳多
		ELSEIF TALENT:(ARG:0):130 == 3
			PRINTFORM 母異常
		ELSEIF TALENT:(ARG:0):130 == 4
			PRINTFORM 母製造
		ELSEIF TALENT:(ARG:0):130 == 5
			PRINTFORM 母乳泉
		ELSEIF TALENT:(ARG:0):130 >= 6
			PRINTFORM 母乳活
		ENDIF
	ELSEIF FLAG:4 == 1
		IF TALENT:(ARG:0):78
			PRINTFORM 淫壷
		ENDIF
		IF TALENT:(ARG:0):104 <= -1
			PRINTFORM ∨鈍
		ELSEIF TALENT:(ARG:0):104 == 1
			PRINTFORM ∨敏
		ELSEIF TALENT:(ARG:0):104 == 2
			PRINTFORM ∨過
		ELSEIF TALENT:(ARG:0):104 == 3
			PRINTFORM ∨異常
		ENDIF
	ELSEIF FLAG:4 == 2
		IF TALENT:(ARG:0):75
			PRINTFORM 尻狂
		ENDIF
		IF TALENT:(ARG:0):104 <= -1
			PRINTFORM Ａ鈍
		ELSEIF TALENT:(ARG:0):104 == 1
			PRINTFORM Ａ敏
		ELSEIF TALENT:(ARG:0):104 == 2
			PRINTFORM Ａ過
		ELSEIF TALENT:(ARG:0):104 == 3
			PRINTFORM Ａ異常
		ENDIF
	ELSEIF FLAG:4 == 3
		PRINTFORML 
		IF TALENT:(ARG:0):77
			PRINTFORM 淫核
		ENDIF
		IF TALENT:(ARG:0):103 <= -1
			PRINTFORM Ｃ鈍
		ELSEIF TALENT:(ARG:0):103 == 1
			PRINTFORM Ｃ敏
		ELSEIF TALENT:(ARG:0):103 == 2
			PRINTFORM Ｃ過
		ELSEIF TALENT:(ARG:0):103 == 3
			PRINTFORM Ｃ異常
		ENDIF
		IF TALENT:(ARG:0):170 == -1
			PRINTFORM 短小
		ELSEIF TALENT:(ARG:0):170 == 1
			PRINTFORM 巨根
		ELSEIF TALENT:(ARG:0):170 == 2
			PRINTFORM 爆根
		ELSEIF TALENT:(ARG:0):170 == 3
			PRINTFORM 超巨根
		ENDIF
		IF TALENT:(ARG:0):171 == 1
			PRINTFORM 極太
		ENDIF
		IF TALENT:(ARG:0):172 == -1
			PRINTFORM 精弱
		ELSEIF TALENT:(ARG:0):172 == 1
			PRINTFORM 絶倫
		ELSEIF TALENT:(ARG:0):172 == 2
			PRINTFORM 超絶倫
		ENDIF
		IF TALENT:(ARG:0):173 == 1
			PRINTFORM 剥けかけ
		ELSEIF TALENT:(ARG:0):173 == 2
			PRINTFORM 仮包
		ELSEIF TALENT:(ARG:0):173 == 3
			PRINTFORM 真包
		ENDIF
		IF TALENT:(ARG:0):174 == 1
			PRINTFORM 恥垢
		ENDIF
		IF TALENT:(ARG:0):175 == 1
			PRINTFORM 悪臭
		ENDIF
		IF TALENT:(ARG:0):177 == 1
			PRINTFORM 黒竿
		ENDIF
		IF TALENT:(ARG:0):178 == -1
			PRINTFORM 遅漏
		ELSEIF TALENT:(ARG:0):178 == 1
			PRINTFORM 早漏
		ENDIF
		
		IF TALENT:(ARG:0):180 == 1
			PRINTFORM 玉
		ELSEIF TALENT:(ARG:0):180 == 2
			PRINTFORM 巨玉
		ELSEIF TALENT:(ARG:0):180 == 3
			PRINTFORM 爆玉
		ELSEIF TALENT:(ARG:0):180 == 4
			PRINTFORM 超巨玉
		ELSEIF TALENT:(ARG:0):180 == 11
			PRINTFORM 片玉
		ELSEIF TALENT:(ARG:0):180 == 12
			PRINTFORM 片巨玉
		ELSEIF TALENT:(ARG:0):180 == 13
			PRINTFORM 片爆玉
		ELSEIF TALENT:(ARG:0):180 == 14
			PRINTFORM 超片巨玉
		ENDIF
		IF TALENT:(ARG:0):181 == 1
			PRINTFORM 毛玉
		ELSEIF TALENT:(ARG:0):181 == 2
			PRINTFORM 剛毛玉
		ENDIF
		
		IF TALENT:(ARG:0):185 == -1
			PRINTFORM 少量射精
		ELSEIF TALENT:(ARG:0):185 == 1
			PRINTFORM 大量射精
		ELSEIF TALENT:(ARG:0):185 == 2
			PRINTFORM 超大量射精
		ENDIF
		IF TALENT:(ARG:0):186 == -1
			PRINTFORM 精薄
		ELSEIF TALENT:(ARG:0):186 == 1
			PRINTFORM 精濃
		ELSEIF TALENT:(ARG:0):186 == 2
			PRINTFORM 精特濃
		ENDIF
		IF TALENT:(ARG:0):187 == 1
			PRINTFORM 熱精
		ENDIF
		IF TALENT:(ARG:0):188 == 1
			PRINTFORM 精黄濁
		ENDIF
	ENDIF

