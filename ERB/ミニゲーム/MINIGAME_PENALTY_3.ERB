;ARG:0	対象キャラ
@MINIGAME_PENALTY_3(ARG:0)
;LOCAL
;0	LOOP

;5-6	HP低下
;7-8	MP低下
;9		CP低下
;10		寄生

LOCAL:3 = RAND:14
	SELECTCASE LOCAL:3
		CASE 0
			CALL ENEMY_ATTACK(ARG:0,1000,10)
		CASE 1
			CALL ENEMY_ATTACK(ARG:0,1000,11)
		CASE 2
			CALL ENEMY_ATTACK(ARG:0,1000,12)
		CASE 3
			CALL ENEMY_ATTACK(ARG:0,1000,21)
		CASE 4
			CALL ENEMY_ATTACK(ARG:0,1000,48)
		CASE 5
			CALL ENEMY_ATTACK(ARG:0,1000,90)
		CASE 6
			CALL ENEMY_ATTACK(ARG:0,1002,31)
		CASE 7
			CALL ENEMY_ATTACK(ARG:0,1002,62)
		CASE 8 TO 9
			TFLAG:63 = 0
			CALL PRINT_MESSAGE((ARG:0), 200, 146, CALLNAME:(ARG:0), "")
			LOCAL:5 = CALC_SENSITIVITY((ARG:0), TFLAG:63, LOCAL:1)
			CALL DAMAGE_COMMON((ARG:0), 2, LOCAL:5 * 7 * (TALENT:(ARG:0):101 + 2) * (TALENT:(ARG:0):75 + 1), 500);◆
			IF RAND:2 == 0
				PRINTFORML %CALLNAME:(ARG:0)%は淫蟲の体液を浴びて【発情】し始めた！
				CALL PRINT_MESSAGE((ARG:0), 200, 148, CALLNAME:(ARG:0), "", 2)
				IF CFLAG:(ARG:0):28 < 3
					CFLAG:(ARG:0):28 += 1
				ENDIF
			ENDIF
			IF RAND:4 == 0 && TALENT:(ARG:0):101 <= 2
				PRINTFORML %CALLNAME:(ARG:0)%の身体の様子がおかしい。どうやら、淫蟲の体液によって体質が書き換えられてしまったようだ…
				CALL WAIT_AUTOMODE(400, 0)

				PRINTFORML %CALLNAME:(ARG:0)%のお尻が少し敏感になった
				CALL WAIT_AUTOMODE(400, 0)

				TALENT:(ARG:0):101 += 1
			ENDIF
		CASE 10 TO 11
			PRINTFORML 無数の触手が%CALLNAME:(ARG:0)%を絡め取る！
			CALL PRINT_MESSAGE(ARG:0, 200, 160, CALLNAME:1, "", 4, 1)
			CFLAG:(ARG:0):5 -= 15 + RAND:15
			CALL PRINT_MESSAGE(ARG:0, 200, 160, CALLNAME:1, "", 5, 0)
			FOR LOCAL:0, 0, 15
				TFLAG:63 = 0
				LOCAL:5 = RAND:5
				CALL DAMAGE_COMMON(ARG:0, 2, 30*(LOCAL:5+10)* (TALENT:(ARG:0):(101+TFLAG:63) + 2), 50)
			NEXT
			PRINTFORML 触手から開放された%CALLNAME:(ARG:0)%は手足を放り出し、力なく震えている…
			CALL WAIT_AUTOMODE(400, 0)

			PRINTFORML %CALLNAME:(ARG:0)%のお尻が敏感になった！
			CALL WAIT_AUTOMODE(400, 0)

			TALENT:(ARG:0):101 += 1
		CASE 12 TO 13
			PRINTFORML %CALLNAME:(ARG:0)%を触手で絡め取った！
			CALL WAIT_AUTOMODE(400, 0)

			CALL PRINT_MESSAGE(ARG:0, 200, 142, CALLNAME:(ARG:0), "", 2, 0)
			CALL EXTASY(ARG:0, 0, 900, 400)
			CALL EXTASY(ARG:0, 0, 900, 400)
			CALL EXTASY(ARG:0, 0, 900, 400)
			CALL EXTASY(ARG:0, 0, 900, 400)
			CALL EXTASY(ARG:0, 0, 900, 400)
			PRINTFORML 　
			PRINTFORML ……
			CALL WAIT_AUTOMODE(400, 0)

			PRINTFORML …………
			CALL WAIT_AUTOMODE(400, 0)

			PRINTFORML 触手生物の責めが終わったとき、%CALLNAME:(ARG:0)%は恍惚の表情を浮かべ、\@ BASE:(ARG:0):3 <= 0 ? 激しく # 服の上から \@自分の尻穴を弄り回していた…
			CALL WAIT_AUTOMODE(400, 0)

			IF TALENT:(ARG:0):74 == 0 || TALENT:(ARG:0):75 == 0 
				PRINTFORML %CALLNAME:(ARG:0)%は触手の責めに屈し、尻穴での快楽に溺れてしまった
				CALL WAIT_AUTOMODE(400, 0)

			ENDIF
			IF TALENT:(ARG:0):74 == 0
				PRINTFORML %CALLNAME:(ARG:0)%は【%TALENTNAME:74%】を得た
				CALL WAIT_AUTOMODE(400, 0)

				TALENT:(ARG:0):74 = 1
			ENDIF
			IF TALENT:(ARG:0):75 == 0
				PRINTFORML %CALLNAME:(ARG:0)%は【%TALENTNAME:75%】を得た
				CALL WAIT_AUTOMODE(400, 0)

				TALENT:(ARG:0):75 = 1
			ENDIF
			PRINTFORML 　
			CALL WAIT_AUTOMODE(400, 0)

			CALL PRINT_MESSAGE(ARG:0, 200, 142, CALLNAME:(ARG:0), "", 3, 0)
	ENDSELECT

LOCAL:5 = TFLAG:65
;体調や素質の補正
IF FLAG:7 >= 11
	LOCAL:5 += 20
ELSEIF FLAG:7 >= 7
	LOCAL:5 += 10
ENDIF
SIF TALENT:(ARG:0):132
	LOCAL:5 = LOCAL:5 / 2 + 1
SIF TALENT:(ARG:0):136
	LOCAL:5 += 5
;ミニゲームなので抱卵しやすくする
IF RAND:50 < LOCAL:5
	;尻
	CALL PARASITE_TYPE(ARG:0, 2, DA:(TFLAG:52):0, 4 + RAND:5 + RAND:5 + RAND:3, 0)
	CALL PRINT_MESSAGE(ARG:0, 40, TFLAG:52, CALLNAME:(ARG:0), SAVESTR:(TFLAG:52))
ENDIF

;出産処理　タイムリミットを多めに減らす
SIF CFLAG:(ARG:0):152
	CFLAG:(ARG:0):152 -= 2
;A寄生処理
CALL CHECK_A_PARASITE(ARG:0)
;媚薬爆弾チェック
CALL CHECK_PARASITE_BOMB(ARG:0)
;子供の削除処理
FOR LOCAL:1, 0, VARSIZE("DA", 1)
	DA:(FLAG:1):(LOCAL:1) = 0
NEXT
;出産していたらメッセージ
IF CFLAG:(ARG:0):158 != EXP:(ARG:0):23
	CFLAG:(ARG:0):158 = EXP:(ARG:0):23
	PRINTFORML
	PRINTFORML 現在の産卵回数 {EXP:(ARG:0):23}
	PRINTFORML
	CALL WAIT_AUTOMODE(400,0)
ENDIF
