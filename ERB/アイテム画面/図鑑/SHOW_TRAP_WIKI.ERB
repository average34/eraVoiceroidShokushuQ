;罠一覧表示
;罠以外のイベントも一応
@SHOW_TRAP_WIKI
;LOCAL
;0	ループ用
;2	直前に選択した番号
;3	罠の詳細を見た
;10	行削除用カウント1(計算用)
;11	行削除用カウント2(計算用)
;12	行削除用カウント3(項目の改行数)
;13	行削除用カウント4(計算用)
;14	行削除用カウント5(計算用)
;15	行削除用カウント6(詳細の改行数)

	$START
	REDRAW 0
	LOCAL:10 = LINECOUNT

	LOCAL:1 = 0
	DRAWLINE
	PRINTFORML どの罠を見ますか？
	;イベントは内部番号が100からなのでそちらに合わせる
	;1～は共通部分の情報
	FOR LOCAL:0, 1, 209
		;下の関数にないものは表示しない
		IF TRAP_NAME(LOCAL:0) != ""
			PRINTFORM [{LOCAL:0,3}] %TRAP_NAME(LOCAL:0),25,LEFT%
			LOCAL:1 += 1
			;3つ表示するごとに改行
			SIF (LOCAL:1 % 3) == 0 && LOCAL:1 > 0
				PRINTL  
		ENDIF
	NEXT
	PRINTL
	PRINTL
	PRINTL [  0] キャンセル

	$INPUT_LOOP
	INPUT

	LOCAL:11 = LINECOUNT
	;項目表示の改行数を記録
	LOCAL:12 = LOCAL:11 - LOCAL:10

	IF RESULT == 0
		REDRAW 1
		LOCAL:3 = 0
		RETURN
	ELSEIF RESULT > 0 && RESULT < 209 && TRAP_NAME(RESULT) != ""
		;行削除(初回)
		IF LOCAL:3 == 0
			CLEARLINE LOCAL:12
		;行削除(2回目～)
		ELSEIF LOCAL:3 == 1 && LOCAL:2 != RESULT
			CLEARLINE LOCAL:15 + LOCAL:12 + 3
		;連打のログ流れ防止
		ELSEIF LOCAL:2 == RESULT
			CLEARLINE 1
			GOTO INPUT_LOOP
		ENDIF
		LOCAL:2 = RESULT
		DRAWLINE
		SETCOLOR 0x60C0FF
		PRINTFORML >> %TRAP_NAME(RESULT),15,LEFT%
		RESETCOLOR
		LOCAL:13 = LINECOUNT
		CALL PRINT_MESSAGE(-1, 516, RESULT, CALLNAME:1, "")
		LOCAL:14 = LINECOUNT
		;説明表示の改行数を記録
		LOCAL:15 = LOCAL:14 - LOCAL:13
		PRINTL
		LOCAL:3 = 1
		GOTO START
	ELSE
		CLEARLINE 1
		REUSELASTLINE 入力が不正です！
		GOTO INPUT_LOOP
	ENDIF


@TRAP_NAME(ARG:0)
#FUNCTIONS

SELECTCASE ARG:0
	CASE 1
		RETURNF "罠の見つけ方、避け方"
	CASE 100
		RETURNF "ナイフ入手"
	CASE 101
		RETURNF "各種アイテム入手"
	CASE 130
		RETURNF "全快湧き水"
	CASE 131
		RETURNF "発情湧き水"
	CASE 132
		RETURNF "ステUP湧き水"
	CASE 133
		RETURNF "澄んだ泉"
	CASE 134
		RETURNF "白濁泉"
	CASE 135
		RETURNF "不思議な泉"
	CASE 136
		RETURNF "スライム"
	CASE 137
		RETURNF "壁触手"
	CASE 138
		RETURNF "落とし穴"
	CASE 139
		RETURNF "桃色ガス"
	CASE 140
		RETURNF "荷物袋"
	CASE 141
		RETURNF "荷物袋トラップ"
	CASE 142
		RETURNF "にょろーん"
	CASE 143
		RETURNF "不思議なガス"
	CASE 144
		RETURNF "柔らかい壁"
	CASE 145
		RETURNF "眠気覚まし"
	CASE 146
		RETURNF "淫蟲"
	CASE 150
		RETURNF "落石"
	CASE 151
		RETURNF "不意打ち"
	CASE 160
		RETURNF "自販機"
	CASE 161
		RETURNF "親睦"
	CASE 162
		RETURNF "占いオババ"
	CASE 163
		RETURNF "汚物消毒ガス"
	CASE 164
		RETURNF "とんかつ"
	CASE 170
		RETURNF "キュウリ畑"
	CASE 171
		RETURNF "荷物袋トラップヒュプノ"
	CASE 172
		RETURNF "敵ガチャ"
	CASE 173
		RETURNF "動物耳"
	CASE 174
		RETURNF "媚薬風呂"
	CASE 175
		RETURNF "白濁風呂"
	CASE 176
		RETURNF "壁尻スライム"
	CASE 179
		RETURNF "結婚式場"
	CASE 180
		RETURNF "入れ替わり"
	CASE 191
		RETURNF "遺品"
	CASE 201
		RETURNF "石碑"
	CASE 208
		RETURNF "電波"
ENDSELECT
