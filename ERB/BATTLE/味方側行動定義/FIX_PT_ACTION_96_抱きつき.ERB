;抱きつき
;CHARA_ID	実行キャラ
;LOCAL
;	:0	対象キャラ
;	:1	TEMP
@FIX_PT_ACTION_96(CHARA_ID)
#DIM CHARA_ID

;全部こちらで処理するのでメイン処理不要
TFLAG:66 = 1

IF CFLAG:1:50 == 95
	LOCAL:0 = 1
ELSEIF CFLAG:(FLAG:10):50 == 95
	LOCAL:0 = FLAG:10
ELSEIF CFLAG:(FLAG:11):50 == 95
	LOCAL:0 = FLAG:11
ELSE
	CFLAG:CHARA_ID:52 = 0
	CFLAG:(LOCAL:0):52 = 0
ENDIF

IF CFLAG:CHARA_ID:52 == 0  && CFLAG:CHARA_ID:28 > 1 && !(CFLAG:CHARA_ID:20 || CFLAG:CHARA_ID:21 || CFLAG:CHARA_ID:29) && !(CFLAG:(LOCAL:0):20 || CFLAG:(LOCAL:0):21) && (GET_PENIS(CHARA_ID) > 0)
	CALL PRINT_MESSAGE(CHARA_ID, 1, 96, CALLNAME:CHARA_ID, CALLNAME:(LOCAL:0), LOCAL:0, 3)
	CFLAG:CHARA_ID:52 = 96
	CALL LOST_VIRGIN(LOCAL:0,0,3,CHARA_ID)
	LOCAL:1 = EXP:CHARA_ID:20
	TFLAG:63 = 3
	CALL DAMAGE_COMMON(LOCAL:0, 2, ABL:CHARA_ID:97 * ABL:CHARA_ID:98 * ABL:CHARA_ID:8, 100)
	CALL ADD_ABL_EXP(9, LOCAL:0, 100)
	TFLAG:63 = 2
	CALL DAMAGE_COMMON((CHARA_ID), 2, ABL:CHARA_ID:97 * ABL:CHARA_ID:98 * ABL:(LOCAL:0):9, 100)
	CALL ADD_ABL_EXP(8, (CHARA_ID), 100)
	;絶頂の回数が増えている＝射精した
	SIF EXP:CHARA_ID:20 > LOCAL:1
		CALL FUTANARI_NINSHIN(1,FUTANARI_PERCENT(7),5 + RAND:16)
ELSEIF CFLAG:CHARA_ID:52 == 0  && CFLAG:CHARA_ID:28 > 1 && !(CFLAG:CHARA_ID:20 || CFLAG:CHARA_ID:21 || CFLAG:CHARA_ID:29) && !(CFLAG:(LOCAL:0):20 || CFLAG:(LOCAL:0):21)
	CALL PRINT_MESSAGE(CHARA_ID, 1, 96, CALLNAME:CHARA_ID, CALLNAME:(LOCAL:0), LOCAL:0, 2)
	CFLAG:CHARA_ID:52 = 96
	TFLAG:63 = 2
	CALL DAMAGE_COMMON(LOCAL:0, 2, ABL:CHARA_ID:97 * ABL:CHARA_ID:98 * ABL:CHARA_ID:8, 100)
	CALL ADD_ABL_EXP(8, LOCAL:0, 100)
	CALL DAMAGE_COMMON((CHARA_ID), 2, ABL:CHARA_ID:97 * ABL:CHARA_ID:98 * ABL:(LOCAL:0):8, 100)
	CALL ADD_ABL_EXP(8, (CHARA_ID), 100)
ELSEIF CFLAG:CHARA_ID:28 > 1 && !(CFLAG:CHARA_ID:20 || CFLAG:CHARA_ID:21 || CFLAG:CHARA_ID:29) && (GET_PENIS(CHARA_ID) > 0) && !(CFLAG:(LOCAL:0):20 || CFLAG:(LOCAL:0):21)
	CALL PRINT_MESSAGE(CHARA_ID, 1, 96, CALLNAME:CHARA_ID, CALLNAME:(LOCAL:0), LOCAL:0, 1)
	CFLAG:CHARA_ID:52 = 96
	CALL LOST_VIRGIN(CHARA_ID,0,3,CHARA_ID)
	LOCAL:1 = EXP:CHARA_ID:20
	TFLAG:63 = 3
	CALL DAMAGE_COMMON(LOCAL:0, 2, ABL:CHARA_ID:97 * ABL:CHARA_ID:98 * ABL:CHARA_ID:8, 100)
	CALL ADD_ABL_EXP(9, LOCAL:0, 100)
	TFLAG:63 = 2
	CALL DAMAGE_COMMON((CHARA_ID), 2, ABL:CHARA_ID:97 * ABL:CHARA_ID:98 * ABL:(LOCAL:0):9, 100)
	CALL ADD_ABL_EXP(8, (CHARA_ID), 100)
	SIF EXP:CHARA_ID:20 > LOCAL:1
		CALL FUTANARI_NINSHIN(1,FUTANARI_PERCENT(7),5 + RAND:16)
ELSEIF CFLAG:CHARA_ID:28 > 1 && !(CFLAG:CHARA_ID:20 || CFLAG:CHARA_ID:21 || CFLAG:CHARA_ID:29) && !(CFLAG:(LOCAL:0):20 || CFLAG:(LOCAL:0):21)
	CALL PRINT_MESSAGE(CHARA_ID, 1, 96, CALLNAME:CHARA_ID, CALLNAME:(LOCAL:0), LOCAL:0, 0)
	CFLAG:CHARA_ID:52 = 96
	TFLAG:63 = 2
	CALL DAMAGE_COMMON(LOCAL:0, 2, ABL:CHARA_ID:97 * ABL:CHARA_ID:98 * ABL:CHARA_ID:8, 100)
	CALL ADD_ABL_EXP(8, LOCAL:0, 100)
	CALL DAMAGE_COMMON((CHARA_ID), 2, ABL:CHARA_ID:97 * ABL:CHARA_ID:98 * ABL:(LOCAL:0):8, 100)
	CALL ADD_ABL_EXP(8, (CHARA_ID), 100)
ELSE
	CFLAG:CHARA_ID:52 = 0
	CFLAG:(LOCAL:0):52 = 0
ENDIF

