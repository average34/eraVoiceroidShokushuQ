@FIX_ENEMY_ACTION_1029(ENEMY_ID)
#DIM ENEMY_ID

TFLAG:52 = ENEMY_ID
TFLAG:54 = DA:ENEMY_ID:51
TFLAG:55 = 6
TFLAG:60 = 1


TFLAG:61 = 120

TFLAG:99 = 1029

CALL ACTION_FILTER(-1, 7, 1029, CALLNAME:(TFLAG:54), SAVESTR:ENEMY_ID, TFLAG:54)



@EXTRA_ACTION_1029(ENEMY_ID, CHARA_ID)
#DIM ENEMY_ID
#DIM CHARA_ID
;LOCAL
;1	命中率

LOCAL:1 = 120

CALL PRINT_MESSAGE(CHARA_ID, 17, 1029, CALLNAME:(TFLAG:54), SAVESTR:ENEMY_ID, TFLAG:54)

IF FLAG:507 > 1
	IF FLAG:507 == 3
		MAXBASE:CHARA_ID:HP = MAXBASE:CHARA_ID:HP * 2 / 3
		BASE:CHARA_ID:HP = 1
		MAXBASE:CHARA_ID:MP = MAXBASE:CHARA_ID:MP * 2 / 3
		BASE:CHARA_ID:MP = 1
		MAXBASE:CHARA_ID:EP = MAXBASE:CHARA_ID:EP * 2 / 3
		BASE:CHARA_ID:EP = 1
	ELSE
		MAXBASE:CHARA_ID:HP = 1
		BASE:CHARA_ID:HP = 1
		MAXBASE:CHARA_ID:MP = 1
		BASE:CHARA_ID:MP = 1
		MAXBASE:CHARA_ID:EP = 1
		BASE:CHARA_ID:EP = 1

	ENDIF
	CFLAG:CHARA_ID:29 = 1
	CFLAG:CHARA_ID:58 = 1
	CALL ADD_HISTORY(DAY, CHARA_ID,DA:(TFLAG:52):0, 18)
ELSE
		
	TFLAG:55 = 3
	TFLAG:63 = 5
	TFLAG:65 = 0

	CALL DAMAGE_COMMON(CHARA_ID, 2, 25000 + RAND:30000, 100)
ENDIF


