@FIX_ENEMY_ACTION_22(ENEMY_ID)
#DIM ENEMY_ID

TFLAG:52 = ENEMY_ID
TFLAG:54 = DA:ENEMY_ID:51
TFLAG:55 = 6
TFLAG:60 = 1

TFLAG:57 = DA:ENEMY_ID:5

TFLAG:58 = 100
TFLAG:59 = 1

TFLAG:61 = 2200

TFLAG:99 = 22

; 催眠の種類ランダム選出用にキャラ別の催眠種類を指定しておく
SIF !CFLAG:(TFLAG:54):43
	CALL SET_HYPNO_TYPE(TFLAG:54)
	
CALL ACTION_FILTER(-1, 7, 22, CALLNAME:(TFLAG:54), SAVESTR:ENEMY_ID, TFLAG:54)



@EXTRA_ACTION_22(ENEMY_ID, CHARA_ID)
#DIM ENEMY_ID
#DIM CHARA_ID
;LOCAL
;1	命中率

LOCAL:1 = 2200

IF TALENT:CHARA_ID:56
	LOCAL:1 = 2100
ENDIF

; 催眠に掛かった瞬間なら、行動を [45]何もしない に変更(NEXTコマンドも空に)
IF !CFLAG:CHARA_ID:43
	CFLAG:CHARA_ID:50 = 45
	CFLAG:CHARA_ID:52 = 0
ENDIF

IF CFLAG:CHARA_ID:43 < 3
	; 催眠強度が5を超えるとレッサーヒュプノの単体催眠扱いでターン終了時に強度減衰する
	; 対策の為ヒュプノの催眠では最大強度を5とする
	CFLAG:CHARA_ID:43 = LIMIT(CFLAG:CHARA_ID:43 + 1, 0, 5)
	CALL PRINT_MESSAGE(CHARA_ID,17, TFLAG:99, CALLNAME:CHARA_ID, SAVESTR:ENEMY_ID, CHARA_ID)
ENDIF


