@FIX_ENEMY_ACTION_962(ENEMY_ID)
#DIM ENEMY_ID

TFLAG:52 = ENEMY_ID
TFLAG:54 = DA:ENEMY_ID:51
TFLAG:55 = 3
TFLAG:60 = 1

TFLAG:57 = DA:ENEMY_ID:5

TFLAG:58 = 40
TFLAG:61 = 80

TFLAG:64 = 15
TFLAG:65 = 80

TFLAG:59 = 1
TFLAG:90 = 150
TFLAG:91 = 3
TFLAG:99 = 962

TFLAG:63 = RAND:4

CALL ACTION_FILTER(-1, 4, 962, CALLNAME:(TFLAG:54), SAVESTR:ENEMY_ID, TFLAG:54, TFLAG:63)


@EXTRA_ACTION_962(ENEMY_ID, CHARA_ID)
#DIM ENEMY_ID
#DIM CHARA_ID
;LOCAL
;1	命中率
;2	TEMP

IF TFLAG:63 == 2
	LOCAL:1 = 30
ELSE
	LOCAL:1 = 0
ENDIF

LOCAL:2 = RAND:100
IF LOCAL:2 < LOCAL:1 && (FLAG:520 == 1 || (FLAG:520 == 2 && CHARA_ID == 1) || (FLAG:520 == 3 && CHARA_ID == FLAG:10) || (FLAG:520 == 3 && CHARA_ID == FLAG:11))
	CALL PRINT_MESSAGE(CHARA_ID, 17, TFLAG:99, CALLNAME:CHARA_ID, SAVESTR:ENEMY_ID, CHARA_ID)
	SIF TALENT:CHARA_ID:121 == 0
		CFLAG:CHARA_ID:42 += RAND:10 + 5

ENDIF
