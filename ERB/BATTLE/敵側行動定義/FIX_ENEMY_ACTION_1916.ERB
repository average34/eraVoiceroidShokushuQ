@FIX_ENEMY_ACTION_1916(ENEMY_ID)
#DIM ENEMY_ID

TFLAG:52 = ENEMY_ID
TFLAG:54 = DA:ENEMY_ID:51
TFLAG:55 = 6
TFLAG:60 = 1


TFLAG:61 = 80

TFLAG:99 = 1916
SELECTCASE RAND:100
	CASE 0 TO 25
		DA:(TFLAG:52):87 = 0
	CASE 26 TO 50
		DA:(TFLAG:52):87 = 1
	CASE 51 TO 65
		DA:(TFLAG:52):87 = 2
	CASE 66 TO 80
		DA:(TFLAG:52):87 = 3
	CASEELSE
		DA:(TFLAG:52):87 = 4
ENDSELECT

CALL ACTION_FILTER(-1, 7, 1916, CALLNAME:(TFLAG:54), SAVESTR:ENEMY_ID, TFLAG:54)



@EXTRA_ACTION_1916(ENEMY_ID, CHARA_ID)
#DIM ENEMY_ID
#DIM CHARA_ID
;LOCAL
;1	命中率

LOCAL:1 = 80

CALL GET_EQUIP_BONUS(CHARA_ID, 38)
IF RESULT
	LOCAL:1 = 0
ENDIF

FLAG:(FLAG:5 + 50) += 5 + RAND:5

IF RAND:100 < LOCAL:1
	CALL PRINT_MESSAGE(CHARA_ID, 17, TFLAG:99, CALLNAME:CHARA_ID, SAVESTR:ENEMY_ID, CHARA_ID)
	BASE:CHARA_ID:5 += 5
	SIF DA:(TFLAG:52):87 == 2 || DA:(TFLAG:52):87 == 3
		BASE:CHARA_ID:5 += 5
	IF RAND:100 < 25
		CFLAG:CHARA_ID:24 = 1
		CFLAG:CHARA_ID:50 = 45
		CFLAG:CHARA_ID:51 = 1
		CFLAG:CHARA_ID:52 = 0
		CFLAG:CHARA_ID:54 = 0
		CFLAG:CHARA_ID:31 = 0
		CFLAG:CHARA_ID:33 = 0
		PRINTFORML %CALLNAME:CHARA_ID%はひるんだ！
	ELSE
		IF RAND:100 < 25 && DA:(TFLAG:52):87 == 1
			CFLAG:CHARA_ID:24 = 1
			CFLAG:CHARA_ID:50 = 45
			CFLAG:CHARA_ID:51 = 1
			CFLAG:CHARA_ID:52 = 0
			CFLAG:CHARA_ID:54 = 0
			CFLAG:CHARA_ID:31 = 0
			CFLAG:CHARA_ID:33 = 0
			PRINTFORML %CALLNAME:CHARA_ID%はひるんだ！
		ENDIF
	ENDIF
ELSE
	CALL PRINT_MESSAGE(CHARA_ID, 27, TFLAG:99, CALLNAME:CHARA_ID, SAVESTR:ENEMY_ID, CHARA_ID)
ENDIF