
@EXTRA_ACTION_1324(ENEMY_ID, CHARA_ID)
#DIM ENEMY_ID
#DIM CHARA_ID
;LOCAL
;1	睡眠命中率
;2	昏睡命中率
;3	RAND

;無印だし少し露骨+辛め
SELECTCASE FLAG:7
	CASE IS < 3
		LOCAL:1 = 10
		LOCAL:2 = 1
	CASE IS < 7
		LOCAL:1 = 33
		LOCAL:2 = 10
	CASE IS < 11
		LOCAL:1 = 75
		LOCAL:2 = 33
	CASE IS < 15
		LOCAL:1 = 100
		LOCAL:2 = 66
	CASEELSE
		LOCAL:1 = 100
		LOCAL:2 = 100
ENDSELECT
IF TFLAG:14 == 3 ;睡眠スタートだった
	LOCAL:1 = LOCAL:1 * 3 / 2 + 1
	LOCAL:2 = LOCAL:2 * 3 / 2 + 1
ENDIF
;PRINTFORML 昏睡率：{LOCAL:1}％　睡眠率：{LOCAL:2}％　眠気：{FLAG:7}

LOCAL:3 = RAND:100
IF LOCAL:3 < LOCAL:2
	;昏睡
	CALL PRINT_MESSAGE(CHARA_ID, 17, TFLAG:99, CALLNAME:CHARA_ID, SAVESTR:ENEMY_ID, CHARA_ID)
	CFLAG:CHARA_ID:25 = 2

ELSEIF LOCAL:3 < LOCAL:1
	;睡眠
	CALL PRINT_MESSAGE(CHARA_ID, 17, TFLAG:99, CALLNAME:CHARA_ID, SAVESTR:ENEMY_ID, CHARA_ID)
	IF CFLAG:CHARA_ID:25 < 1
		CFLAG:CHARA_ID:25 = 1
	ENDIF
ELSE
	CALL PRINT_MESSAGE(CHARA_ID, 27, TFLAG:99, CALLNAME:CHARA_ID, SAVESTR:ENEMY_ID, CHARA_ID)
ENDIF


