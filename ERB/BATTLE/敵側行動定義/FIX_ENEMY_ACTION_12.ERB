@FIX_ENEMY_ACTION_12(ENEMY_ID)
#DIM ENEMY_ID

TFLAG:52 = ENEMY_ID
TFLAG:54 = DA:ENEMY_ID:51
TFLAG:55 = 6
TFLAG:60 = 1

TFLAG:57 = DA:ENEMY_ID:5

TFLAG:58 = 100
TFLAG:59 = 0

TFLAG:61 = 100

TFLAG:99 = 12

CALL ACTION_FILTER(-1, 7, 12, CALLNAME:(TFLAG:54), SAVESTR:ENEMY_ID, TFLAG:54)



@EXTRA_ACTION_12(ENEMY_ID, CHARA_ID)
#DIM ENEMY_ID
#DIM CHARA_ID
;LOCAL
;1	命中率
;2	TEMP

LOCAL:1 = 70

IF TALENT:CHARA_ID:56
	LOCAL:1 = 40
ENDIF

CALL GET_EQUIP_BONUS(CHARA_ID, 37)
IF RESULT
	LOCAL:1 = 0
ENDIF

LOCAL:2 = RAND:100
IF LOCAL:2 < LOCAL:1
	CALL PRINT_MESSAGE(CHARA_ID, 17, TFLAG:99, CALLNAME:CHARA_ID, SAVESTR:ENEMY_ID, CHARA_ID)
	CFLAG:CHARA_ID:25 = 2
ELSEIF LOCAL:2 < LOCAL:1 + 20
	CALL PRINT_MESSAGE(CHARA_ID, 17, TFLAG:99, CALLNAME:CHARA_ID, SAVESTR:ENEMY_ID, CHARA_ID)
	IF CFLAG:CHARA_ID:25 < 1
		CFLAG:CHARA_ID:25 = 1
	ENDIF
ELSE
	CALL PRINT_MESSAGE(CHARA_ID, 27, TFLAG:99, CALLNAME:CHARA_ID, SAVESTR:ENEMY_ID, CHARA_ID)
ENDIF


