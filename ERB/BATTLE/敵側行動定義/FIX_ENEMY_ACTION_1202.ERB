@FIX_ENEMY_ACTION_1202(ENEMY_ID)
#DIM ENEMY_ID
#DIM CHARA_ID

TFLAG:52 = ENEMY_ID
TFLAG:54 = DA:ENEMY_ID:51
CHARA_ID = DA:ENEMY_ID:51
TFLAG:55 = 5
TFLAG:60 = 1

TFLAG:57 = DA:ENEMY_ID:5
;NFダメージ補正
TFLAG:58 = 1000 / TFLAG:57 + 20 + CALC_NF_DAMAGE(CHARA_ID, 1)
TFLAG:61 = 150

TFLAG:64 = 0
TFLAG:65 = 20

TFLAG:91 = 0
;バイオプラント、ナイトメアケージ、触手姫なら特殊寄生
SELECTCASE DA:ENEMY_ID:0
CASE 4, 43, 102
	TFLAG:93 = 1
CASEELSE
	TFLAG:93 = 0
ENDSELECT

TFLAG:63 = 1

TFLAG:99 = 1202

CALL ACTION_FILTER(-1, 6, 1202, CALLNAME:(TFLAG:54), SAVESTR:ENEMY_ID, TFLAG:54, TFLAG:64, TFLAG:63)

@EXTRA_ACTION_1202(ENEMY_ID, CHARA_ID)
#DIM ENEMY_ID
#DIM CHARA_ID

SIF TALENT:CHARA_ID:130 >= 3
	CFLAG:CHARA_ID:506 += TALENT:CHARA_ID:130 * 10 + 20

CFLAG:CHARA_ID:512 += 2
TRYCALL CHECK_NIPPLE_EXTEND(CHARA_ID)
IF RESULT:0 == 1
	SELECTCASE TALENT:CHARA_ID:162
	CASE 1
		CALL PRINT_MESSAGE(CHARA_ID, 518, 4, CALLNAME:CHARA_ID, "")
	CASE 2
		CALL PRINT_MESSAGE(CHARA_ID, 518, 5, CALLNAME:CHARA_ID, "")
	CASE 3
		CALL PRINT_MESSAGE(CHARA_ID, 518, 6, CALLNAME:CHARA_ID, "")
	CASE 4
		CALL PRINT_MESSAGE(CHARA_ID, 518, 7, CALLNAME:CHARA_ID, "")
	ENDSELECT
ENDIF

IF GET_BUST(CHARA_ID) >= 2
	CALL MILK_COME(CHARA_ID, 1, 2)
	CALL PRINT_MESSAGE(CHARA_ID,17, 957, CALLNAME:CHARA_ID, SAVESTR:ENEMY_ID, CHARA_ID)
	CALL MILK_ADJUST(CHARA_ID, 0)
ENDIF
